# Проект 3. Определение перспективного тарифа для телеком компании

### Вводная: 
Работая в компании сотового оператора «ВодаФон», вам как аналитику поступила задача: понять, какой тариф приносит больше денег.
Всего клиентам предлагают два тарифных плана: «Смарт» и «Ультра». Вам предоставлены данные 500 пользователей для предварительного анализа. В таблицах содержится информация о самих пользователях, их тарифах, количестве звонков и сообщений за 2018 год. Необходимо проанализировать поведение клиентов и сделать вывод — какой тариф лучше.

К тому же требуется проверить следующие продуктовые гипотезы:
1. средняя выручка пользователей тарифов «Ультра» и «Смарт» различается;
2. средняя выручка пользователей из Москвы отличается от выручки пользователей из других регионов.


### Цель проекта 
Проанализировать поведение клиентов и сделать вывод — какой из тарифов приносит больше денег.

#### 

### Что было сделано 

**1.**  Мы обработали и проанализировали информацию о выборке из 500 клиентов из пяти различных таблиц. В процессе работы были решены следующие проблемы:

**2.1.** Столбцы с датами были приведены к формату datetime.
<br><br>
**2.2.** Исправлены ошибки в данных:

- Был удален столбец таблицы `internet`, который дублировал индексы.
- Значения минут и интернет трафика округлены согласно тарифной логике оператора.
- Были отфильтрованы нулевые значения, поскольку их наличие не соответствовало конечной цели исследования. 
<br>

**2.3.** Рассчитано для каждого пользователя:
<br>
- количество сделанных звонков и израсходованных минут разговора по месяцам;
- количество отправленных сообщений по месяцам;
- объем израсходованного интернет-трафика по месяцам;
- помесячная выручка с каждого пользователя 
        

**3.** Проведен исследовательский анализ данных.  
Исходя из выборки, мы описали поведение клиентов оператора. Было проанализировано сколько минут разговора, сколько сообщений и какой объём интернет-трафика требуется пользователям каждого тарифа в месяц. После мы построили гистограммы и описали полученные распределения.

**Время разговора**  
Было получено, что для пользователей тарифа ультра среднее время звонков 417.9 и медиана 422 минуты, что меньше чем у пользователей тарифа ультра (среднее 526.6 мин., медиана 518 мин.)
Значения сильнее разбросаны у пользователей тарифа ультра (дисперсия 100873.6), чем у пользователей смарт (дисперсия 36219.3).

Описание распределений:

Распределение времени разговора для пользователей тарифа smart близко к нормальному, однако скошено влево.
У пользователей тарифа ultra видим больший разброс значений, график более плоский. Наблюдается пик возле нуля. 

Хотя мы удаляли звонки с продолжительностью 0 минут, эти значения все равно появляются поскольку при объединении таблиц в одну у нас появлялись пропуски и мы заполняли их нулевыми значениями. При исключении нулевых значений пик исчезает и распределение становится похоже на нормальное.

Почему некоторые пользователи не звонили целый месяц, но платили за пакет услуг? Возможно это могут быть клиенты, пользующиеся преимущественно звонками через интернет (WhatsApp, Viber и т.д.) или же клиенты, которые уезжали на этот месяц за границу.

**Количество сообщений**  

| Статистика      | smart_users | ultra_users |
| :-------------- | ----------- | ----------- |
| Среднее:        | 33.4        | 49.4        |
| Медиана:        | 28.0        | 38.0        |
| Дисперсия:      | 796.8       | 2285.3      |
| Ст. отклонение: | 28.2        | 47.8        |

Согласно полученной статистике, пользователи тарифа ультра имеют большее среднее и медиану, однако и дисперсия у них больше. 

Наблюдается пик возле нуля для обоих распределений. Оба распределения можно характеризовать распределением Пуассона. Было зафиксировано, что у пользователей тарифа ultra более долгий хвост справа.

**Интернет трафик**  

| Статистика      | smart_users | ultra_users |
| :-------------- | ----------- | ----------- |
| Среднее:        | 16229.2     | 19486.9     |
| Медиана:        | 16531.0     | 19324.0     |
| Дисперсия:      | 34545911.1  | 101935621.0 |
| Ст. отклонение: | 5877.6      | 10096.3     |


Согласно полученной статистике, пользователи тарифа ultra имеют большее среднее и медиану, однако и дисперсия у них больше.

Оба распределения интернет трафика у пользователей различных тарифов близко к нормальному, однако немного скошено влево.
У пользователей тарифа ультра наблюдается больший разброс значений, распределение более плоское.

**4.** На данном шаге мы проверяли следующие продуктовые гипотезы:

**4.1. Cредняя выручка пользователей тарифов «Ультра» и «Смарт» различается**  

После того как мы разобрали понятие средней выручки, сформировали нулевую и альтернативную гипотезы:
<br>![formula](https://render.githubusercontent.com/render/math?math=H_0): Средние выручки пользователей тарифов "Ультра» и «Смарт" равны.
<br>![formula](https://render.githubusercontent.com/render/math?math=H_1): Средняя выручка пользователей тарифов «Ультра» и «Смарт» различается.

После проверки распределения признаков в каждой выборке мы выявили, что оба распределения схожи с распределением Пуассона. 
На основании этого был выбран метод для сравнения средних двух генеральных совокупностей по отдельно взятым выборкам – Т-критерий Стьюдента.

После применения Т-критерия Стьюдента мы получили ![formula](https://render.githubusercontent.com/render/math?math=p = 2.73e-246)   
Р-значение крайне мало, поэтому вероятность того, что мы получили наблюдаемую разницу средних случайно, крайне мала.
Таким образом была принята гипотеза ![formula](https://render.githubusercontent.com/render/math?math=H_1): Средняя выручка пользователей тарифов «Ультра» и «Смарт» различается.  

Средняя выручка пользователей тарифов «Ультра» больше, поскольку у них среднее 2071.1, а у пользователей тарифа «Смарт» среднее 1294.6 рублей.

**4.2. Cредняя выручка пользователей из Москвы отличается от выручки пользователей из других регионов**  

На данном этапе мы сформировали следующие статистические гипотезы:
<br>![formula](https://render.githubusercontent.com/render/math?math=H_0): Средние выручки пользователей из Москвы и пользователей из других регионов равны.
<br>![formula](https://render.githubusercontent.com/render/math?math=H_1): Cредняя выручка пользователей из Москвы отличается от выручки пользователей из других регионов.

После небольшой обработки данных мы проверили распределение – оно было непараметрическим, поэтому мы добавим непараметрический U-критерий Манна-Уитни о равенстве выборочных распределений для проверки нашей гипотезы.

Средние выборок были практически равны между собой, дисперсии же немного отличались.

Т-тест показал, что не получилось отвергнуть нулевую гипотезу (p-значение: 0.51)

U-тест показал, что распределения одинаковы. (p-значение: 0.19)

Таким образом у нас осталась принятой гипотеза ![formula](https://render.githubusercontent.com/render/math?math=H_0): Средние выручки пользователей из Москвы и пользователей из других регионов равны.

